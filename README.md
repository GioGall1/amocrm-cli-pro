## AmoCRM CLI Pro

**PHP-инструмент для автоматизации работы с AmoCRM через API v4.**  
Проект создан как учебный и демонстрирует умение проектировать архитектуру, работать с API и разделять ответственность по слоям (DTO, Repository, Service).

---

### Возможности

- Перенос сделок с бюджетом **> 5000** на этап “Ожидание клиента”  
- Копирование сделок с бюджетом **= 4999**  
- Автоматическое обновление токена  
- Разделение логики по слоям: DTO, Repository, Service  
- Простое логирование в файлы (`logs/app.log`, `logs/error.log`)  

---

### Установка и запуск

1. Клонировать репозиторий:
   ```bash
   git clone https://github.com/GioGall1/amocrm-cli-pro.git
   cd amocrm-cli-pro
   ```

2. Скопировать пример конфига:
   ```bash
   cp config/config.example.php config/config.php
   ```
   Затем вставить свои данные:
   - `client_id`,  
   - `client_secret`,  
   - `redirect_uri`,  
   - `code`,  
   - `pipeline_id`,  
   - `status_id` и др.

3. Запустить CLI:
   ```bash
   php index.php
   ```

4. Проверить результат выполнения в своей AmoCRM.

---

### Логика работы

1. `LeadService` получает сделки по статусу и фильтрует их по бюджету.  
   Если бюджет **> 5000**, сделка перемещается в статус “Ожидание клиента”.  

2. Сделки с бюджетом **= 4999** дублируются в новый статус.  

3. `TokenService` автоматически обновляет токен при его истечении.  

4. `Logger` записывает все операции и ошибки в отдельные файлы.  

---

### Зависимости
- PHP >= 8.1  
- cURL extension  

---

### Автор
**GioGall (Георгий)**
[github.com/GioGall1](https://github.com/GioGall1)

---
